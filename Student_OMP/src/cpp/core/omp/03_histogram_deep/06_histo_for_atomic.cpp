#include <omp.h>
#include "00_pi_tools.h"
#include "OmpTools.h"

/*----------------------------------------------------------------------*\
 |*			Declaration 					*|
 \*---------------------------------------------------------------------*/

/*--------------------------------------*\
 |*		Imported	 	*|
 \*-------------------------------------*/

/*--------------------------------------*\
 |*		Public			*|
 \*-------------------------------------*/

void HistoOMPforAtomic(int* ptrData, int n, int* ptrResult, int histoSize);

/*--------------------------------------*\
 |*		Private			*|
 \*-------------------------------------*/

/*static double
piOMPforAtomic (int n);*/

/*----------------------------------------------------------------------*\
 |*			Implementation 					*|
 \*---------------------------------------------------------------------*/

/*--------------------------------------*\
 |*		Public			*|
 \*-------------------------------------*/

/*bool
isPiOMPforAtomic_Ok (int n)
{
  return isAlgoPI_OK (piOMPforAtomic, n, "Pi OMP for atomic");
}*/

/*--------------------------------------*\
 |*		Private			*|
 \*-------------------------------------*/

/**
 * synchronisation couteuse!
 */
void HistoOMPforAtomic(int* ptrData, int n, int* ptrResult, int histoSize)
{
  #pragma omp parralel for

    for (int i = 0; i < n; i++)
      {

  #pragma omp atomic
	ptrResult[ptrData[i]]+=1;

      }
}

/*----------------------------------------------------------------------*\
 |*			End	 					*|
 \*---------------------------------------------------------------------*/

